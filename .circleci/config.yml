version: 2.1

workflows:
  main:
    jobs:
      - print_secrets:
          context: slack-secrets

jobs:
    print_secrets:
        resource_class: small
        docker:
            #- image: cimg/base:stable
            - image: python:3.7
        steps:
            - add_ssh_keys
            - checkout
            - run:
                name: Some python
                command: python -c 'import os; x = os.environ["CODECOV_TOKEN"]; print(x)'
            - run:
                name: Print Slack env vars
                command: echo $SLACK_ACCESS_TOKEN
            - run:
                name: Print global env vars
                command: echo $CODECOV_TOKEN
            - run:
                name: Print more stuff
                command: cat /home/circleci/.ssh/id_rsa
