mutation DeleteArtifactSequence($id: ID!) {
  deleteArtifactSequence(input: { artifactSequenceID: $id }) {
    artifactCollection {
      state
    }
  }
}

mutation DeleteArtifactPortfolio($id: ID!) {
  deleteArtifactPortfolio(input: { artifactPortfolioID: $id }) {
    artifactCollection {
      state
    }
  }
}

mutation UpdateArtifactSequence($input: UpdateArtifactSequenceInput!) {
  updateArtifactSequence(input: $input) {
    artifactCollection {
      __typename
      id
      name
      description
    }
  }
}

mutation UpdateArtifactPortfolio($input: UpdateArtifactPortfolioInput!) {
  updateArtifactPortfolio(input: $input) {
    artifactCollection {
      __typename
      id
      name
      description
    }
  }
}

mutation MoveArtifactCollection($input: MoveArtifactSequenceInput!) {
  moveArtifactSequence(input: $input) {
    artifactCollection {
      __typename
      id
      name
      description
    }
  }
}

mutation CreateArtifactCollectionTagAssignments(
  $input: CreateArtifactCollectionTagAssignmentsInput!
) {
  createArtifactCollectionTagAssignments(input: $input) {
    tags {
      id
      name
      tagCategoryName
    }
  }
}

mutation DeleteArtifactCollectionTagAssignments(
  $input: DeleteArtifactCollectionTagAssignmentsInput!
) {
  deleteArtifactCollectionTagAssignments(input: $input) {
    success
  }
}

fragment ArtifactCollectionsFragment on ArtifactCollectionConnection {
  pageInfo {
    endCursor
    hasNextPage
  }
  totalCount
  edges {
    node {
      __typename
      id
      name
      description
      createdAt
    }
    cursor
  }
}

query ProjectArtifactCollections(
  $entityName: String!
  $projectName: String!
  $artifactTypeName: String!
  $cursor: String
) {
  project(name: $projectName, entityName: $entityName) {
    artifactType(name: $artifactTypeName) {
      # NOTE: The node being aliased is named:
      # - `artifactCollections` for new servers
      # - `artifactSequences` for old servers
      artifactCollections: artifactCollections(after: $cursor) {
        ...ArtifactCollectionsFragment
      }
    }
  }
}

query ProjectArtifactCollection(
  $entityName: String!
  $projectName: String!
  $artifactTypeName: String!
  $artifactCollectionName: String!
  $cursor: String
  $perPage: Int = 1000
) {
  project(name: $projectName, entityName: $entityName) {
    artifactType(name: $artifactTypeName) {
      # NOTE: The node being aliased is named:
      # - `artifactCollection` for new servers
      # - `artifactSequence` for old servers
      artifactCollection: artifactCollection(name: $artifactCollectionName) {
        id
        name
        description
        createdAt
        tags {
          edges {
            node {
              id
              name
            }
          }
        }
        aliases(after: $cursor, first: $perPage) {
          edges {
            node {
              alias
            }
            cursor
          }
          pageInfo {
            endCursor
            hasNextPage
          }
        }
      }
      artifactSequence(name: $artifactCollectionName) {
        __typename
      }
    }
  }
}

fragment ArtifactPortfolioTypeFields on ArtifactPortfolio {
  __typename
  id
  name
}

fragment ArtifactSequenceTypeFields on ArtifactSequence {
  __typename
  id
  name
}
