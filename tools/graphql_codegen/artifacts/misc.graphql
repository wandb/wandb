fragment PageInfoFragment on PageInfo {
  __typename
  endCursor
  hasNextPage
}

# Query for info on a GraphQL type to check for server compatibility
fragment TypeInfoFragment on __Type {
  name
  fields {
    name
    args {
      name
    }
  }
  inputFields {
    name
  }
}

query TypeInfo($name: String!) {
  __type(name: $name) {
    ...TypeInfoFragment
  }
}

fragment OrgInfoFragment on Organization {
  name
  orgEntity @include(if: true) {
    # Workaround: ensures generated pydantic field defaults to `None` in case the server doesn't support it
    name
  }
}

query FetchOrgInfoFromEntity($entity: String!) {
  entity(name: $entity) {
    organization {
      ...OrgInfoFragment
    }
    user {
      organizations {
        ...OrgInfoFragment
      }
    }
  }
}
