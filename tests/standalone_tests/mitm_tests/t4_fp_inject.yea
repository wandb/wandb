plugin:
  - wandb
tag:
  shards:
    - mitm
option:
  - :wandb:mitm
command:
  program: fp_inject.py
env:
  - WANDB_FILE_PUSHER_TIMEOUT: "5"
assert:
  - :wandb:runs_len: 1
  - :wandb:runs[0][exitcode]: 0
trigger:
  - storage:
      command: pause
      service: storage
      count: 1
      time: 10
      skip: 3
      one_shot: 1
      # on the 3rd storage request, inject a one_shot delay of 10 seconds
      # this will cause a retry
